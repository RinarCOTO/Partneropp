---
import HeroLogo from '../../assets/images/tatt2away-bw.png';
import HeroBG from '../../assets/images/hero-bg.png';
import GoldenRing from '../../assets/images/golden-ring.png';
import HeroImg1 from '../../assets/images/hero-img-1.png'
import HeroImg2 from '../../assets/images/hero-img-2.png'
import HeroImg3 from '../../assets/images/hero-img-3.png'
import { Image } from "astro:assets";
import Button from '../button.astro';
---
<style>
    .hero-bg {
        position: absolute;
        width: 1322px;
        height: 1322px;
        border-radius: 1322px;
        background: radial-gradient(50% 50% at 50% 50%, #41334D 0%, rgba(7, 1, 9, 0.13) 100%);
        margin-right: 20rem;
    }
    .hero-img-border{
        border-radius: 50%;
        position: relative;
        border: 3px solid transparent;
        background: 
            linear-gradient(#00000000, #00000000) padding-box,
            linear-gradient(to bottom, rgba(130, 102, 157, 1), rgba(220, 160, 121, 1)) border-box;
    }
    
    /* Animation classes */
    .hero-content {
        opacity: 0; /* Initially hidden */
    }
    
    .hero-logo-wrapper {
        position: relative;
        height: auto;
        margin-bottom: 2rem;
        transition: top 0.5s ease;  /* Smooth transition fallback */
    }
    
    .hero-logo {
        transform-origin: center center;
        will-change: transform;     /* Performance optimization */
    }
    
    .hero-images {
        opacity: 0;
    }
    
    /* Always show hero background */
    .hero-bg {
        opacity: 1 !important;
        visibility: visible !important;
    }
</style>

<section class="relative md:h-[943px]">
  <!-- Foreground content -->
  <div class="relative z-20 flex flex-col items-center justify-center text-center mx-auto md:mt-[180px]">
    <!-- Logo with initial animation -->
    <div id="hero-logo-wrapper" class="hero-logo-wrapper">
      <Image id="hero-logo" src={HeroLogo} alt="InkOUT Logo" class="hero-logo" />
    </div>
    
    <!-- Content that appears after logo animation -->
    <div id="hero-content" class="hero-content">
      <h1 class="text-[#DFA985] text-[36px] font-satoshi-black uppercase md:mt-[25px]">
        Enhance your studio with safe, natural tattoo removal
      </h1>
      <p class="text-[28px] md:my-[35px] text-white">
        Empower Your Tattoo Studio with Tatt2Away's Non-Laser, <br />
        All-Natural Ink Removal and Revision Solution.
      </p>
      <Button label="Talk to an expert" href="#" variant="secondary"/>
    </div>
    
    <!-- Images with border that appear after content -->
    <div id="hero-images" class="flex md:space-x-[140px] hero-images">
      <Image src={HeroImg1} 
          alt="Tattoo removal process image 1" 
          class="hero-img-border md:mt-[75px] md:h-[173px] md:w-[173px]" />
      <Image src={HeroImg2} 
          alt="Tattoo removal process image 2" 
          class="hero-img-border md:mt-[116px] md:h-[173px] md:w-[173px]" />
      <Image src={HeroImg3} 
          alt="Tattoo removal process image 3" 
          class="hero-img-border md:mt-[75px] md:h-[173px] md:w-[173px]" />
    </div>
    
    <!-- Background image -->
    <div id="golden-ring-wrapper" class="absolute -z-10 flex items-center justify-center top-0 md:mt-[320px]">
      <Image 
          src={GoldenRing} 
          alt="Golden Ring Background"
          class="relative z-10 pointer-events-none" />
      <Image 
          src={HeroBG} 
          alt="purple bg" 
          class="absolute z-0 md:mt-[29px] pointer-events-none" />
    </div>
    <div class="-z-8 hero-bg bottom-0 pointer-events-none" id="hero-bg"></div>
  </div>
</section>

<!-- GSAP Animation Script -->
<script>
  // Wait for the page to load
  document.addEventListener('DOMContentLoaded', () => {
    // Import GSAP dynamically
    import('gsap').then((gsap) => {
      const { gsap: animation } = gsap;
      
      // Initial setup - make the logo larger and position it lower
      animation.set("#hero-logo-wrapper", {
        position: "relative",
        top: "80px"  // Start lower in the viewport
      });
      
      animation.set("#hero-logo", { 
        scale: 1.8, 
        width: "auto", 
        opacity: 1
      });
      // Set content to be initially hidden and positioned lower for parallax effect
      animation.set("#hero-content", { 
        opacity: 0,
        y: 60 // Start further below for stronger parallax effect
      });
      // Set golden ring and hero images initially positioned to the left
      animation.set("#hero-images", { 
        opacity: 0,
        x: -60 // Start left of final position for slide-in effect
      });
      // Set golden ring to start hidden and off-screen (only the golden ring, not the purple bg)
      animation.set("#golden-ring-wrapper img:first-child", {
        opacity: 0, // Initially hidden
        x: -120, // Start further left for better reveal effect
        clipPath: "inset(0 80% 0 0)" // Initially clip most of it from view (reveal from left)
      });
      
      // Set the purple background to be initially hidden
      animation.set("#golden-ring-wrapper img:last-child", {
        opacity: 0 // Initially hidden
      });
      
      // Create animation timeline (no initial delay)
      const tl = animation.timeline({
        defaults: { 
          ease: "power3.out" 
        }
      });
      
      // Animate logo to normal size and position (moving upward smoothly)
      tl.to("#hero-logo-wrapper", {
        top: "0",  // Move up to its final position
        duration: 1.4,
        ease: "power1.out" // Smoother, more linear upward motion
      }, 0)
      
      .to("#hero-logo", {
        scale: 1,
        height: "auto",
        duration: 1.4, // Match duration with the upward movement
        ease: "power1.out" // Smoother, more consistent easing
      }, 0)  // The "0" means this animation starts at the same time as the previous one
      
      // Animate the content as one unit with a parallax-like rising effect
      .to("#hero-content", {
        opacity: 1,
        y: 0, // Move to final position
        duration: 1.2,
        ease: "power2.out"
      }, "-=0.8")  // More overlap with logo animation for parallax effect
      
      // Slide in golden ring from left to right with reveal effect (only the ring, not the bg)
      .to("#golden-ring-wrapper img:first-child", {
        opacity: 1, // Fade in
        x: 0, // Move to final position
        clipPath: "inset(0 0% 0 0)", // Reveal fully
        duration: 1.4, // Longer duration for smoother reveal
        ease: "power2.out" // Smoother easing for reveal effect
      }, "-=0.3") // Start shortly after content appears
      
      // Fade in and slide the images from left to right
      .to("#hero-images", {
        opacity: 1,
        x: 0, // Move to final position
        duration: 1.0,
        ease: "power1.out"
      }, "-=0.8") // Start almost in sync with golden ring animation
      
      // Fade in the purple background after hero images animation completes
      .to("#golden-ring-wrapper img:last-child", {
        opacity: 1,
        duration: 0.8,
        ease: "power1.in"
      }, "+=0.2"); // Slight delay after hero images complete
    });
  });
</script>
